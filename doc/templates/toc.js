// Generated by CoffeeScript 1.9.3
(function() {
  var VERSION, Weya, template;

  VERSION = 9;

  Weya = require('./weya/weya');

  template = function() {
    return this.html(function() {
      this.head(function() {
        this.meta({
          charset: "utf-8"
        });
        this.title("Wallapatta");
        this.meta({
          name: "viewport",
          content: "width=device-width, initial-scale=1.0"
        });
        this.meta({
          name: "apple-mobile-web-app-capable",
          content: "yes"
        });
        this.link({
          href: 'http://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600,700,800,900',
          rel: 'stylesheet',
          type: 'text/css'
        });
        this.link({
          href: "lib/skeleton/css/skeleton.css",
          rel: "stylesheet"
        });
        this.link({
          href: "css/style.css",
          rel: "stylesheet"
        });
        return this.script('(function(i,s,o,g,r,a,m){i[\'GoogleAnalyticsObject\']=r;i[r]=i[r]||function(){\n(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\nm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,\'script\',\'//www.google-analytics.com/analytics.js\',\'ga\');\n\nga(\'create\', \'UA-37809145-1\', \'auto\');\nga(\'send\', \'pageview\');');
      });
      return this.body(function() {
        return this.div(".container", function() {
          this.h1("Wallapatta");
          return this.div(".toc", function() {
            var renderChapters;
            renderChapters = function(list) {
              if (list == null) {
                return;
              }
              return this.ol(function() {
                var article, i, len, results;
                results = [];
                for (i = 0, len = list.length; i < len; i++) {
                  article = list[i];
                  results.push(this.li(function() {
                    if (article.file != null) {
                      this.a({
                        href: article.id + ".html"
                      }, article.title);
                    } else {
                      this.span(article.title);
                    }
                    return renderChapters.call(this, list.content);
                  }));
                }
                return results;
              });
            };
            return renderChapters.call(this, this.$.chapters);
          });
        });
      });
    });
  };

  exports.html = function(options) {
    var html;
    html = Weya.markup({
      context: options
    }, template);
    html = "<!DOCTYPE html>" + html;
    return html;
  };

}).call(this);
